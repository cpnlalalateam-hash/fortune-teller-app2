<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒƒ æ¬ ã‘ãŸæ˜Ÿåº§ï¼ˆç©ºäº¡ï¼‰å ã„ã€ä¿®æ­£ç‰ˆã€‘</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; }
        h1 { color: #4a4a6a; text-align: center; }
        .input-group { margin-bottom: 15px; padding: 10px; border: 1px solid #eee; border-radius: 5px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        input[type="text"], input[type="number"] { width: calc(100% - 12px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { padding: 10px 20px; background-color: #4a4a6a; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; width: 100%; }
        button:hover { background-color: #6a6a8a; }
        #result { margin-top: 20px; padding: 15px; border: 2px solid #a8a8c8; border-radius: 5px; background-color: #f7f7ff; }
        .affinity { font-size: 1.2em; font-weight: bold; margin-top: 10px; color: #d04040; }
    </style>
</head>
<body>

<h1>ğŸŒƒ æ¬ ã‘ãŸæ˜Ÿåº§ï¼ˆç©ºäº¡ï¼‰å ã„ã€æœ€çµ‚ç‰ˆã€‘</h1>

<div class="input-group">
    <label for="name1">ä¸€äººç›®ã®åå‰:</label>
    <input type="text" id="name1" placeholder="ä¾‹: ãƒ¦ã‚¦ã‚­">
    <label for="month1">èª•ç”Ÿæœˆ (1-12):</label>
    <input type="number" id="month1" min="1" max="12" placeholder="12">
    <label for="day1">èª•ç”Ÿæ—¥ (1-31):</label>
    <input type="number" id="day1" min="1" max="31" placeholder="25">
</div>

<div class="input-group">
    <label for="name2">äºŒäººç›®ã®åå‰:</label>
    <input type="text" id="name2" placeholder="ä¾‹: ã‚¢ã‚ªã‚¤">
    <label for="month2">èª•ç”Ÿæœˆ (1-12):</label>
    <input type="number" id="month2" min="1" max="12" placeholder="5">
    <label for="day2">èª•ç”Ÿæ—¥ (1-31):</label>
    <input type="number" id="day2" min="1" max="31" placeholder="10">
</div>

<button onclick="runUranai()">å ã†ï¼</button>

<div id="result">
    ã“ã“ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
</div>

<script>
// ----------------------------------------------------
// 2. JavaScript (ä¿®æ­£å¾Œã®ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†)
// ----------------------------------------------------

// 1. æ¬ ã‘ãŸæ˜Ÿåº§ã®å®šç¾© (é‹å‘½æ•°1-6ã¨å‰²ã‚Šå½“ã¦)
const SEIZA_TYPES = {
    1: "ç«ã®ç¯ç± ", 2: "éœ§ã®æ¹–ç•”", 3: "é‹¼ã®ç ‚æ™‚è¨ˆ", 
    4: "ç„¡éŸ³ã®æœ¨é™°", 5: "é‡åŠ›ã®ãªã„åŸ", 6: "å¿˜ã‚Œã‚‰ã‚ŒãŸå¤§åœ°"
};

// 2. ç›¸æ€§ãƒ«ãƒ¼ãƒ«ã®å®šç¾© (æœ€é«˜ã®ç›¸æ€§: é‹å‘½ã®è£œå®Œè€…)
const COMPLEMENT_MAP = {
    1: 6, 2: 5, 3: 4, 
    4: 3, 5: 2, 6: 1
};

// æ•°ç§˜è¡“ã«è¿‘ã„ãƒ­ã‚¸ãƒƒã‚¯ï¼šæœˆæ—¥ã‚’åˆ†è§£ã—ã€1æ¡ã«ãªã‚‹ã¾ã§åˆè¨ˆã—ã¦é‹å‘½æ•° (1-9) ã‚’å‡ºã™é–¢æ•°
function getSingleDigit(num) {
    let sum = 0;
    while (num > 0 || sum > 9) {
        if (num === 0) {
            num = sum;
            sum = 0;
        }
        sum += num % 10;
        num = Math.floor(num / 10);
    }
    return sum; // çµæœã¯1ï½9ã«ãªã‚‹ (11, 22, 33ãªã©ã®ãƒã‚¹ã‚¿ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã¯è€ƒæ…®ã—ãªã„ç°¡æ˜“ç‰ˆ)
}

// æœ€çµ‚çš„ãªæ˜Ÿåº§ã‚¿ã‚¤ãƒ—ç•ªå·(1ï½6)ã‚’æ±ºå®šã™ã‚‹
function calculateSeizaNumber(month, day) {
    if (month < 1 || month > 12 || day < 1 || day > 31) return null;

    // æœˆã¨æ—¥ã®æ•°å€¤ã‚’çµåˆã—ã¦ä¸€æ‹¬ã§é‹å‘½æ•°ã‚’è¨ˆç®—
    const total = getSingleDigit(parseInt(month)) + getSingleDigit(parseInt(day));
    
    // æœ€çµ‚åˆè¨ˆã‚’1æ¡ã«ã—ã€0 (10, 20ãªã©)ã‚’1ã¨ã™ã‚‹
    let finalNum = getSingleDigit(total);
    if (finalNum === 0) finalNum = 1; // 0ã‚’é¿ã‘ã‚‹

    // é‹å‘½æ•° (1-9) ã‚’ 6ã¤ã®æ˜Ÿåº§ã‚¿ã‚¤ãƒ— (1-6) ã«å‰²ã‚ŠæŒ¯ã‚‹
    // 9ã¨7ã¯6, 8ã¯5ã«å‰²ã‚ŠæŒ¯ã‚‹ (ç°¡æ˜“çš„ãªãƒãƒƒãƒ”ãƒ³ã‚°)
    if (finalNum === 7 || finalNum === 9) return 6; 
    if (finalNum === 8) return 5;
    
    return finalNum; // 1, 2, 3, 4, 5, 6
}

// ç›¸æ€§ã‚’åˆ¤å®šã—ã€çµæœã®HTMLã‚’è¿”ã™ (å‰å›ã¨ãƒ­ã‚¸ãƒƒã‚¯ã¯åŒã˜)
function determineAffinity(num1, num2, name1, name2) {
    const type1 = SEIZA_TYPES[num1];
    const type2 = SEIZA_TYPES[num2];
    let affinity, detail;

    if (COMPLEMENT_MAP[num1] === num2) {
        affinity = "é‹å‘½ã®è£œå®Œè€…";
        detail = "æœ€é«˜ã®ç›¸æ€§ã§ã™ï¼ãŠäº’ã„ã®æ ¹æºçš„ãªæ¬ è½ã‚’å®Œç’§ã«åŸ‹ã‚åˆãˆã¾ã™ã€‚äºŒäººã¯å‡ºä¼šã†ã¹ãã—ã¦å‡ºä¼šã£ãŸé‹å‘½çš„ãªãƒšã‚¢ã§ã™ã€‚";
    } else if (num1 === num2) {
        affinity = "é™ã‹ãªå…±é³´è€…";
        detail = "åŒã˜æ¬ è½ã‚’æŒã¤ãŸã‚ã€æ·±ãç†è§£ã—åˆãˆã¾ã™ãŒã€å¤§ããªå¤‰åŒ–ã‚’èµ·ã“ã™ã«ã¯äºŒäººã§å”åŠ›ãŒå¿…è¦ã§ã™ã€‚";
    } else {
        affinity = "æ‘©æ“¦ã®å‰µé€ è€…";
        detail = "ãŠäº’ã„ã®ä¾¡å€¤è¦³ãŒå¤§ããç•°ãªã‚‹ãŸã‚ã€æ™‚ã«ã¯æ¿€ã—ã„è¡çªã‚’ä¼´ã„ã¾ã™ãŒã€ãã‚Œã¯äºŒäººã®æˆé•·ã®ãƒãƒ£ãƒ³ã‚¹ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚";
    }

    return `
        <p>ğŸŒŸ <b>${name1}</b> ã•ã‚“ã®é‹å‘½æ•°: ${num1} -> æ¬ ã‘ãŸæ˜Ÿåº§: <b>ã€${type1}ã€‘</b></p>
        <p>ğŸŒŸ <b>${name2}</b> ã•ã‚“ã®é‹å‘½æ•°: ${num2} -> æ¬ ã‘ãŸæ˜Ÿåº§: <b>ã€${type2}ã€‘</b></p>
        <div class="affinity">ğŸ’– ${name1} ã¨ ${name2} ã®ç›¸æ€§ã¯... ã€${affinity}ã€‘ã§ã™ã€‚</div>
        <p>è©³ç´°: ${detail}</p>
    `;
}

// å ã„ã‚’å®Ÿè¡Œã—ã€çµæœã‚’ç”»é¢ã«è¡¨ç¤ºã™ã‚‹ (å‰å›ã¨ãƒ­ã‚¸ãƒƒã‚¯ã¯åŒã˜)
function runUranai() {
    const name1 = document.getElementById('name1').value || 'ä¸€äººç›®';
    const month1 = document.getElementById('month1').value;
    const day1 = document.getElementById('day1').value;
    const name2 = document.getElementById('name2').value || 'äºŒäººç›®';
    const month2 = document.getElementById('month2').value;
    const day2 = document.getElementById('day2').value;

    const num1 = calculateSeizaNumber(month1, day1);
    const num2 = calculateSeizaNumber(month2, day2);

    if (num1 === null || num2 === null) {
        document.getElementById('result').innerHTML = "âš ï¸ èª•ç”Ÿæœˆãƒ»èª•ç”Ÿæ—¥ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
        return;
    }

    const resultHTML = determineAffinity(num1, num2, name1, name2);
    document.getElementById('result').innerHTML = resultHTML;
}
</script>
</body>
</html>